<webc-container controller="SingleOrderController">
  <main class="full-flex-column">
    <section>
      <webc-template template="header-template"></webc-template>
      <webc-template template="dashboard-menu"></webc-template>
    </section>

    <section class="header-section">
	  <div class='navigation-section'>
	      <span class="nav-back" data-tag='nav-back'>
	        <svg viewBox='0 0 52 52' x='0px' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' y='0px'>
	          <path
	           d='M50,24H6.83L27.41,3.41a2,2,0,0,0,0-2.82,2,2,0,0,0-2.82,0l-24,24a1.79,1.79,0,0,0-.25.31A1.19,1.19,0,0,0,.25,25c0,.07-.07.13-.1.2l-.06.2a.84.84,0,0,0,0,.17,2,2,0,0,0,0,.78.84.84,0,0,0,0,.17l.06.2c0,.07.07.13.1.2a1.19,1.19,0,0,0,.09.15,1.79,1.79,0,0,0,.25.31l24,24a2,2,0,1,0,2.82-2.82L6.83,28H50a2,2,0,0,0,0-4Z'
	          />
	        </svg>
	      </span>
		  <span data-tag='dashboard'>Dashboard</span> / <span data-tag='dashboard'>Orders</span> / <strong>{{@order.orderId}}</strong>
	    </div>

      <div class="body-main-section">
        <div class="row-wrapper">
          <div class="col-4 text-left">
            <div data-if="@order.status_approved">
              <div class="entity-status-box background-approved" slot="true">
                <div>Order Status:</div>
                <div><b>{{@order.status_value}}</b></div>
                <div>{{@order.status_date}}</div>
              </div>
            </div>
            <div data-if="@order.status_cancelled">
              <div class="entity-status-box background-cancelled" slot="true">
                <div>Order Status:</div>
                <div><b>{{@order.status_value}}</b></div>
                <div>{{@order.status_date}}</div>
              </div>
            </div>
            <div data-if="@order.status_normal">
              <div class="entity-status-box background-primary" slot="true">
                <div>Order Status:</div>
                <div><b>{{@order.status_value}}</b></div>
                <div>{{@order.status_date}}</div>
              </div>
            </div>
          </div>

          <div class="col-4 text-center">
            <div class="entity-title"><b>Order</b></div>
            <div class="entity-subtitle"><b>Pending Action:</b></div>
            <div class="entity-disclaimer">{{@order.pending_action}}</div>
          </div>

          <div class="col-4 text-right">
            <button class="btn-default" data-tag="history-button">
              <i class='fas fa-clock-rotate-left'></i>
              View History
            </button>
          </div>
        </div>

        <div class="row-wrapper entity-data-section">
          <!-- Order Details -->
          <div class="accordion-item" data-tag="toggle-accordion">
            <i class='fas fa-angle-right accordion-icon'></i>
            <span>Order Details</span>
          </div>
          <div class="accordion-item-holder">
            <webc-template data-view-model="@" template="order/order-details"></webc-template>
          </div>

          <!-- Attached Documents -->
          <div class="accordion-item" data-tag="toggle-accordion">
            <i class='fas fa-angle-right accordion-icon'></i>
            <span>Attached Documents</span>
          </div>
          <div class="accordion-item-holder" data-if="@order.documents">
            <table class="table table-borderless attach-documents-table">
              <thead>
                <tr>
                  <th scope="col">Document Name</th>
                  <th scope="col">Attached By</th>
                  <th scope="col">Date/Time Attached</th>
                  <th class="text-center" scope="col">Open/Download</th>
                </tr>
              </thead>
              <tbody data-for="@order.documents">
                <tr>
                  <th>{{@name}}</th>
                  <td>{{@attached_by}}</td>
                  <td>{{@date}}</td>
                  <td class="text-center" data-tag="download-file" data-custom="@name">
                    <i class='attach-documents-table-icon fas fa-download'></i>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Order Comments -->
          <div class="accordion-item" data-tag="toggle-accordion">
            <i class='fas fa-angle-right accordion-icon'></i>
            <span>Order Comments</span>
          </div>
          <div class="accordion-item-holder overflow-auto">
            <div data-if="@order.comments">
              <div class="comments-container py-5 flex-column" data-for="@order.comments">
                <div class="comment">
                  <div class="identity"><small>{{@entity}}</small>, <small>{{@date}}</small></div>
                  <div>{{@comment}}</div>
                </div>
                <div slot="no-data">No comments</div>
              </div>
            </div>
          </div>
        </div>

	      <div class='row-wrapper button-wrapper'>
		      <div data-if='@order.actions.canBeCancelled'>
			      <button class='btn-cancel' data-tag='cancel-order'>
				      <svg id='Layer_1' style='enable-background: new 0 0 512 512' version='1.1' viewBox='0 0 512 512'
				           x='0px' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'
				           y='0px'>
		                <path
			              d='M256,0C114.841,0,0,114.841,0,256c0,141.159,114.841,256,256,256s256-114.841,256-256C512,114.841,397.159,0,256,0z
										 M256,490.667C126.604,490.667,21.333,385.396,21.333,256c0-60.87,23.299-116.397,61.445-158.143l331.365,331.366
										C372.398,467.366,316.87,490.667,256,490.667z M429.227,414.138L97.862,82.772C139.607,44.632,195.133,21.333,256,21.333
										c129.396,0,234.667,105.271,234.667,234.667C490.667,316.867,467.367,372.393,429.227,414.138z'></path>
			            </svg>
				      {{ @order.actions.orderCancelButtonText }}
			      </button>
		      </div>

	      </div>
      </div>
    </section>
  </main>
</webc-container>
